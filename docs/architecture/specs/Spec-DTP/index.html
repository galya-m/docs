<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-architecture/specs/Spec-DTP">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Data transfer proofs | Nevermined Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.nevermined.io/docs/architecture/specs/Spec-DTP"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data transfer proofs | Nevermined Documentation"><meta data-rh="true" name="description" content="Data transfer proofs"><meta data-rh="true" property="og:description" content="Data transfer proofs"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.nevermined.io/docs/architecture/specs/Spec-DTP"><link data-rh="true" rel="alternate" href="https://docs.nevermined.io/docs/architecture/specs/Spec-DTP" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nevermined.io/docs/architecture/specs/Spec-DTP" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://IB2HKPUD05-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Nevermined Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Nevermined Documentation Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-S70X8HQFLP","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>


<link rel="search" type="application/opensearchdescription+xml" title="Nevermined Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.ff2b7b52.css">
<link rel="preload" href="/assets/js/runtime~main.d7ecd0d3.js" as="script">
<link rel="preload" href="/assets/js/main.4641ba1f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/nevermined/nevermined_logo.svg" alt="Nevermined Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/nevermined/nevermined_logo.svg" alt="Nevermined Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/docs/catalog/intro">Catalog</a><a class="navbar__item navbar__link" href="/docs/nevermined-sdk/">SDK</a><a class="navbar__item navbar__link" href="/docs/tutorials">Tutorials</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/GZju2qScKq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><img src="/nevermined/discord-gray.svg" alt="Discord" class="discord"></a><a href="https://github.com/nevermined-io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><img src="/nevermined/github-gray.svg" alt="Github" class="github"></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/catalog/intro">Nevermined Catalog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nevermined Catalog&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/nevermined-sdk">Nevermined SDK</a><button aria-label="Toggle the collapsible sidebar category &#x27;Nevermined SDK&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/cli/">CLI</a><button aria-label="Toggle the collapsible sidebar category &#x27;CLI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/environments/">Environments</a><button aria-label="Toggle the collapsible sidebar category &#x27;Environments&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/architecture/">Architecture</a><button aria-label="Toggle the collapsible sidebar category &#x27;Architecture&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/what-can-i-do">What can I do with my assets?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/building-dapps">Building decentralized applications with Nevermined</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/building-blocks">Building Blocks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/architecture/contracts/">Smart Contracts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Smart Contracts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/architecture/marketplace-api/">Marketplace API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Marketplace API&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/architecture/gateway/">Gateway</a><button aria-label="Toggle the collapsible sidebar category &#x27;Gateway&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/architecture/specs/">Specs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Specs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-DID">Decentralized Identifiers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-METADATA">Metadata Ontology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-NFT">NFTs Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-ACCESS">Decentralized Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-COMPUTE">Data in situ Computation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-FL">Federated Learning Orchestration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-PROVENANCE">Decentralized Data Provenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/architecture/specs/Spec-DTP">Data transfer proofs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-MKT">Marketplace API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/Spec-IDM">Identity management with on-chain access control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/specs/examples/">Nevermind Specs Examples</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/architecture/nevermined-data">Information available in Nevermined</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/architecture/components/marketplace-api/openapi">components</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/architecture/"><span itemprop="name">Architecture</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/architecture/specs/"><span itemprop="name">Specs</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Data transfer proofs</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Data transfer proofs</h1><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">shortname:      KEYTRANSFER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name:           Data transfer proofs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type:           Standard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">status:         Valid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version:        0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">editor:         Sami Mäkelä &lt;sami@nevermined.io&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contributors:   Aitor Argomaniz &lt;aitor@nevermined.io&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This SPEC describes an addition to ACCESS SPEC, namely new flows with improved guarantees about data transfer.
This enables using public storage for encrypted data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">​</a></h2><p>Nevermined manages access control over digital assets. The protocol has been based in authenticate and authorize consumers to get access to components created and registered into an ecosystem by a publisher.
When this access control needs to be implemented on top of storage solutions with some authorization mechanism (like Amazon S3 or similar) it&#x27;s easier. The gateway protects that only authorized users can get access.
But when you want to use some storage without any access control capabilities (like a file available in a public HTTP url, or in IPFS or Filecoin), whoever with access to the URL can get access to the file going over any access control mechanism that Nevermined can provided.</p><p>In this kind of scenarios, they only way to protect this content is to encrypt it, and only allow to decrypt when the user fulfill some conditions. This SPEC is about the defition of the solution that allows to build robust and scalable access control on top of publicly available data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="main-ideas">Main ideas<a class="hash-link" href="#main-ideas" title="Direct link to heading">​</a></h3><p>If the unencrypted asset is described by its hash, there are at least two use cases for being able to prove that the access to the asset with given hash is transferred:</p><ul><li>A third party might have reviewed the data and can confirm its properties. Additionally it will show that each recipient gets the same data.</li><li>If compute attestation is available, for it to work both participants need access to data.</li></ul><p>To save resources, instead of showing that all the data is transferred, we assume that there is publicaly available encrypted data and only the symmetric key will be transferred (the hash of symmetric key is known by all participants). This does not impact the above use cases:</p><ul><li>The third party can instead validate the combination of the key and encrypted data.</li><li>The compute attestation will use the encrypted data hash and the key instead of plain data hash as starting point. Note that with interactive proofs it would be enough for sender to send the decrypted key signed with their ECDSA or similar key. An advantage is that the keys can be used multiple times when using snarks.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="actors-and-technical-components">Actors and Technical Components<a class="hash-link" href="#actors-and-technical-components" title="Direct link to heading">​</a></h2><ul><li>PUBLISHERS - Provide access to assets and/or services</li><li>CONSUMERS - Want to get access to assets and/or services</li><li>PROVIDER - When the publisher is not 100% &#x27;online&#x27; can delegate some responsibilities to a provider for making data available on behalf of the publisher</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="flows">Flows<a class="hash-link" href="#flows" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-assets">Publishing Assets<a class="hash-link" href="#publishing-assets" title="Direct link to heading">​</a></h3><p>To set up the asset metadata:</p><p>For the files, the first file represents the key and <code>url</code> attribute contains the plain text key (probably have to change).
These parts of metadata are encrypted so they won&#x27;t show up publicly when querying the gateway.</p><p>The public parts that have to be added to <code>additionalInformation</code> are</p><ul><li><code>poseidonHash</code>: Poseidon hash of the key.</li><li><code>providerKey.x</code> and <code>providerKey.y</code>: The Babyjubjub public key of the provider.</li></ul><p>When the asset files are encrypted, the DDO will include under <code>main</code> the attribute <code>encryption</code> with the possible values of:</p><ul><li><code>dtp</code> - It means the file/s are encrypted via Data Tranfer Proofs</li><li><code>none</code> - The files are not encrypted. This is the default behavior if the parameter is not defined</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-agreement">Service agreement<a class="hash-link" href="#service-agreement" title="Direct link to heading">​</a></h3><p>For the service agreement, following data is needed:</p><ul><li>Address of provider and consumer.</li><li>Asset ID.</li><li>Poseidon hash of the data.</li><li>Babyjubjub keys of the provider and consumer.</li><li>Payment information.</li></ul><p>Before entering into the agreement, the consumer should already have downloaded the publicly available encrypted data.</p><p>Other parts of the flow are the same as normal access flow, but the final fulfilling of the transfer on-chain is different.</p><p>Provider first has to compute a shared secret using ECDH from his private key and consumers public key. This secret is used to encrypt the key using MiMC. The encrypted key is then sent onchain with the SNARK proof of correctness.</p><p>Similarly, consumer first has to compute a shared secret using ECDH from his private key and providers public key. The encrypted key is read from chain and then decrypted using MiMC. The hash of the result will be the same as was given beforehand.</p><p>Here is the complete flow including the different actors:</p><p><img loading="lazy" alt="Data Transfer Proofs Deal Flow" src="/assets/images/data-transfer-proof-deal-flow-e4f10af09cd5ef0ec8ef84dea9a0ddbe.png" width="960" height="540" class="img_ev3q"></p><p>In the case of an issue, here you can find the flow about how to manage the dispute resolution:</p><p><img loading="lazy" alt="Data Transfer Proofs Deal Flow" src="/assets/images/data-transfer-proof-dispute-resolution-438c46f17042e963584e811f0b61bcc2.png" width="960" height="540" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-from-gateway">Accessing from gateway<a class="hash-link" href="#accessing-from-gateway" title="Direct link to heading">​</a></h3><p>In this scenario, the gateway acts as a PROVIDER. This is specially useful when the PUBLISHER doesn&#x27;t want to be on-line running a service for responding to CONSUMER requests.
In these kind of scenarios, the PUBLISHER delegates to the PROVIDER running a gateway the capabilities of releases the decryption key to the CONSUMER when the conditions are fulfilled.</p><p>Accessing documents using the gateway mostly works the same way as normal flow, but the consumer has to send its Babyjubjub public key too. The data must be checked so that the gateway won&#x27;t send invalid proofs to the net (it&#x27;s possible to get the key from the calldata of the fulfill method if they have the corresponding key).
Additionally we can check that the eth address corresponds to the babyjub public key. This isn&#x27;t absolutely necessary, but is needed if we want the gateway to return the data transfer key (or perhaps the data as plain text).</p><p><img loading="lazy" alt="Data Transfer Proofs Deal Flow" src="/assets/images/data-transfer-proof-gateway-uploader-c2770e5abe786a9fdf5168c71bbe8737.png" width="960" height="540" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nevermined-io/docs/tree/main/docs/architecture/specs/Spec-DTP.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/architecture/specs/Spec-PROVENANCE"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Decentralized Data Provenance</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/architecture/specs/Spec-MKT"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Marketplace API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a><ul><li><a href="#main-ideas" class="table-of-contents__link toc-highlight">Main ideas</a></li></ul></li><li><a href="#actors-and-technical-components" class="table-of-contents__link toc-highlight">Actors and Technical Components</a></li><li><a href="#flows" class="table-of-contents__link toc-highlight">Flows</a><ul><li><a href="#publishing-assets" class="table-of-contents__link toc-highlight">Publishing Assets</a></li><li><a href="#service-agreement" class="table-of-contents__link toc-highlight">Service agreement</a></li><li><a href="#accessing-from-gateway" class="table-of-contents__link toc-highlight">Accessing from gateway</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/index">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/architecture/index">Architecture</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorials/index">Tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/nevermined-io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCaDKPgnEk4ekvQo2vO6FIBQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:info@nevermined.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><ul class="social-links">
                  <li>
                    <a href="https://discord.gg/GZju2qScKq" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/discord.svg" alt="Discord" class="discord">
                    </a>
                  </li>
                  <li>
                    <a href="https://github.com/nevermined-io" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/github.svg" alt="Github" class="github">
                    </a>
                  </li>
                  <li>
                    <a href="https://twitter.com/nevermined_io" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/twitter.svg" alt="Twitter" class="twitter">
                    </a>
                  </li>
                  <li>
                    <a href="https://medium.com/nevermined-io" target="_blank" rel="noopener noreferrer">
                      <img src="/nevermined/medium.svg" alt="Medium" class="medium">
                    </a>
                  </li>
                </ul></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Nevermined AG.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d7ecd0d3.js"></script>
<script src="/assets/js/main.4641ba1f.js"></script>
</body>
</html>